<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}Compliance Summariser{% endblock %}</title>
  <link rel="stylesheet" href="/static/css/tailwind.css">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#e7f3e7; --card:#fff; --ink:#111; --muted:#555; --line:#d6e4d6; --accent:#007c41; }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;color:var(--ink);background:var(--bg);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

    .site-header{position:sticky;top:0;z-index:40;background:#fff;border-bottom:1px solid var(--line);box-shadow:0 1px 0 rgba(0,0,0,.04);backdrop-filter:saturate(140%) blur(4px)}
    .site-header .row{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:.75rem 1rem}
    .brand{font-weight:700;letter-spacing:.2px;font-size:1.05rem}
    .brand a{color:var(--accent);text-decoration:none}

    nav.tabs{display:flex;align-items:center;gap:.5rem}
    nav.tabs a{padding:.4rem .75rem;border-radius:8px;font-size:.9rem;font-weight:500;text-decoration:none;color:var(--accent);border:1px solid transparent}
    nav.tabs a:hover{background:rgba(0,124,65,.05)}
    nav.tabs a.active{background:var(--accent);color:#fff;border-color:var(--accent)}

    .header-actions{display:flex;align-items:center;gap:.5rem}
    .btn{appearance:none;border:1px solid var(--line);background:#fff;padding:.45rem .75rem;border-radius:8px;font:inherit;cursor:pointer;text-decoration:none;color:inherit}
    .btn.small{padding:.35rem .6rem;font-size:.85rem}
    .btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}

    .page{max-width:1200px;margin:1rem auto 2.5rem;padding:0 1rem}
    .panel,.card{background:var(--card);border:1px solid var(--line);border-radius:12px;box-shadow:0 1px 0 rgba(0,0,0,.03);padding:1rem}
    .wrap{display:grid;grid-template-columns:1fr;gap:1rem;align-items:start}
    @media (min-width:900px){.wrap{grid-template-columns:280px 1fr}}
    .muted{color:var(--muted)}
    .pagination{display:flex;gap:.4rem;align-items:center;margin-top:.75rem}
    .pagination a,.pagination span{display:inline-block;padding:.4rem .6rem;border:1px solid var(--line);border-radius:8px;text-decoration:none;color:inherit;background:#fff;font-size:.9rem}
    .pagination .active{background:var(--ink);color:#fff;border-color:var(--ink)}
  </style>
  {% block head %}{% endblock %}
</head>
<body>
  <header class="site-header">
    <div class="row">
      <div class="flex items-center gap-6">
        <div class="brand"><a href="/">Ofgem Compliance Summariser</a></div>

        <nav class="tabs">
          <a href="/summaries" class="{% if active_tab == 'summaries' %}active{% endif %}">Summaries</a>

          {% if org_id %}
            <a href="/orgs/{{ org_id }}" class="{% if active_tab == 'org' %}active{% endif %}">Organisation</a>
            <a href="/orgs/{{ org_id }}/controls" class="{% if active_tab == 'controls' %}active{% endif %}">Controls</a>
            <a href="/orgs/{{ org_id }}/org-risks" class="{% if active_tab == 'risks' %}active{% endif %}">Risks</a>
          {% else %}
            <a href="/orgs/select">Select organisation</a>
          {% endif %}

          <a href="/saved" class="{% if active_tab == 'saved' %}active{% endif %}">Saved</a>
        </nav>
      </div>

      <div class="header-actions">
        {% if org_name %}
          <span class="muted text-sm">Org: {{ org_name }}</span>
          <a class="btn small" href="/orgs/select">Switch</a>
        {% endif %}

        {% if uid %}
          <form method="post" action="/account/logout" style="margin:0;">
            <button type="submit" class="btn small">Sign out</button>
          </form>
        {% else %}
          <a href="/account/login" class="btn small">Sign in</a>
        {% endif %}
      </div>
    </div>
  </header>

  <main class="page">
    {% block content %}{% endblock %}
  </main>
  {# Page-specific scripts (e.g. summaries.html) go here #}
  {% block scripts %}{% endblock %}
</body>
</html>
